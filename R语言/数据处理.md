### Dealing with Dates
#### Getting current date & time
> 获取当前的日期和时间
```r
# 获取当前的时区
> Sys.timezone()
[1] "Asia/Taipei"
# 获取当前的日期
> Sys.Date()
[1] "2018-04-09"
# 获取当前的时间
> Sys.time()
[1] "2018-04-09 17:27:52 CST"
> now()
[1] "2018-04-09 17:30:31 CST"
```

### Converting strings to dates
> 当日期和时间被引入到R中的时候，默认情况下是字符串数据
#### Convert Strings to Dates
> 将一个 YYYY-MM-DD 的日期格式转换成日期对象，需要使用 as.Date() 函数
```r
> x <- c("2015-07-01", "2015-08-01", "2015-09-01")
> x
[1] "2015-07-01" "2015-08-01" "2015-09-01"
> as.Date(x)
[1] "2015-07-01" "2015-08-01" "2015-09-01"
```
> 默认的日期格式是 YYYY-MM-DD 如果使用了其他的日期格式，则使用 format 参数
> lubridate 包中的函数可以自动识别，日期格式中的间隔符， ("-", "/", ".", and "")
```r
> y <- c("07/01/2015", "07/01/2015", "07/01/2015")
> y
[1] "07/01/2015" "07/01/2015" "07/01/2015"
> as.Date(y, format="%m/%d/%Y")
[1] "2015-07-01" "2015-07-01" "2015-07-01"

# lubridate
ymd(x)
mdy(y)
```


# Data Structure Basics
## Identifying the Structure
> str() stands for structure and provides a compact display of the internal structure of an R object.
```R
> vector <- 1:10
> str(vector)
 int [1:10] 1 2 3 4 5 6 7 8 9 10
> list <- list(item1 = 1:10, item2 = LETTERS[1:18])
> list
$item1
 [1]  1  2  3  4  5  6  7  8  9 10

$item2
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R"

> matric <- matrix(1:12, nrow = 4)
> str(matric)
 int [1:4, 1:3] 1 2 3 4 5 6 7 8 9 10 ...
> df = data.frame(item1 = 1:18, item2 = LETTERS[1:18])
> df
   item1 item2
1      1     A
2      2     B
3      3     C
4      4     D
5      5     E
6      6     F
7      7     G
8      8     H
9      9     I
10    10     J
11    11     K
12    12     L
13    13     M
14    14     N
15    15     O
16    16     P
17    17     Q
18    18     R
```
## Attributes
> R objects can have attributes, which are like metadata for the object.

> R 对象的属性有点像对象的元数据，用于描述数据的数据

> Attributes of an object (if any) can be accessed using the attributes() function. Not all R objects contain attributes, in which case the attributes() function returns NULL.

> 对象的属性可以通过 attributes() 函数返回一个对象的属性，但是并不是所有的对象都有属性的，没有属性信息的对象返回 NULL

- names, dimnames
- dimensions (e.g. matrices, arrays)
- class (e.g. integer, numeric)
- length
- other user-defined attributes/metadata

```R
> attributes(df)
$names
[1] "item1" "item2"

$row.names
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18

$class
[1] "data.frame"

> attributes(matric)
$dim
[1] 4 3

> attributes(list)
$names
[1] "item1" "item2"
```
> names() 函数获取对象的名称

> class() 函数获取对象的类型

> dim() 函数获取对象的维度

> length() 函数获取对象的长度
> note that length will measure the number of items in a list or number of columns in a data frame
> length() 函数统计的是 item 的个数


```R
> names(df)
[1] "item1" "item2"
> class(df)
[1] "data.frame"
> dim(matric)
[1] 4 3
> dim(df)
[1] 18  2
> length(df)
[1] 2
> length(matric)
[1] 12
> length(vector)
[1] 10
> names(matric)
NULL
```
# Managing Vectors
> A vector is a sequence of data elements of the same basic type: integer, double, logical, or character.
> 一个vector对象是一些同质元素的序列

## Creating
> The colon : operator can be used to create a vector of integers between two specified numbers or the c() function can be used to create vectors of objects by concatenating elements together
> ：操作符用于创建一个整数 vector，或者使用 c() 函数可以将各个对象连接起来生成一个 vector对象

```r
> w <- 8:17
> w
 [1]  8  9 10 11 12 13 14 15 16 17
> x <- c(0.5, 0.6, 0.2)
> x
[1] 0.5 0.6 0.2
> y1 <- c(TRUE, FALSE, FALSE)
> y1
[1]  TRUE FALSE FALSE
> y2 <- c(T,F,F)
> y2
[1]  TRUE FALSE FALSE
> z <- c("a", "b", "c")
> z
[1] "a" "b" "c"
```

> You can also use the as.vector() function to initialize vectors or change the vector type:
> 可以使用 as.type() 函数去初始化 vector对象的类型
```r
> v <- as.vector(8:17, mode = "character")
> v
 [1] "8"  "9"  "10" "11" "12" "13" "14" "15" "16" "17"
```

> All elements of a vector must be the same type, so when you attempt to combine different types of elements they will be coerced to the most flexible type possible
> vector中所有的元素都应该是同质的，当你尝试连接不同类型的元素时，则将转换为包容度最大的数据类型
```R
> str(c("a", "b", "c", 1, 2, 3))
 chr [1:6] "a" "b" "c" "1" "2" "3"
> str(c("a", "c", TRUE, FALSE))
 chr [1:4] "a" "c" "TRUE" "FALSE"
> str(c(1, 2, 3, TRUE, FALSE))
 num [1:5] 1 2 3 1 0
```
## Adding on to
> To add additional elements to a pre-existing vector we can continue to leverage the c() function.
> 追加元素到 vector 对象可以使用 c() 函数
```R
> v1 <- 1:5
> c(v1, 6:10)
 [1]  1  2  3  4  5  6  7  8  9 10
```

## Adding attributes
> The attributes that you can add to vectors includes names and comments.
> vector 对象属性可以添加名字和注释
> The first uses names() to assign names to each element of the vector.
> 可以使用 names() 函数给vector对象的每一个元素分配一个名字
> 也可以使用键值对，在创建时直接指定
```R
> attributes(v1)
NULL
> names(v1) <- LETTERS[1:length(v1)]
> v1
A B C D E
1 2 3 4 5
> v2 <- c(name1 =1, name2 = 2, name3 = 3)
> attributes(v2)
$names
[1] "name1" "name2" "name3"
```
> We can also add comments to vectors to act as a note to the user.
> 可以使用 comment() 函数给 vector对象添加注释
```r
> comment(v2) <- "This is just for test"
> attributes(v2)
$names
[1] "name1" "name2" "name3"

$comment
[1] "This is just for test"
```

## Subsetting
### Subsetting with positive integers
```r
> v1
A B C D E
1 2 3 4 5
> v1[2]
B
2
> v1[2:4]
B C D
2 3 4
> v1[c(2,2,4)]
B B D
2 2 4
```

### Subsetting with negative integers
> Subsetting with negative integers will omit the elements at the specified positions
> 数字代表了位置，使用负数代表着去除哪些元素
```r
> v1
A B C D E
1 2 3 4 5
> v1[-1]
B C D E
2 3 4 5
> v1[-c(1,2)]
C D E
3 4 5
```

### Subsetting with logical values
> Subsetting with logical values will select the elements where the corresponding logical value is TRUE
> 选取哪些元素，在对应的位置设置 TRUE
```R
> v[c(TRUE, FALSE, TRUE, FALSE, TRUE, TRUE, TRUE, FALSE, FALSE, TRUE)]
[1] "8"  "10" "12" "13" "14" "17"
> v[v < 12]
[1] "10" "11"
> v[v < 12 | v > 15]
[1] "8"  "9"  "10" "11" "16" "17"
> v[v < 12 & v > 10]
[1] "11"
```

### Subsetting with names
> Subsetting with names will return the elements with the matching names specified
```R
> v1["A"]
A
1
> v1[c("a", "c")]
<NA> <NA>
  NA   NA
> v1[c("A", "C")]
A C
1 3
```

## Simplifying vs. Preserving

# Managing Lists
> A list is an R structure that allows you to combine elements of different types, including lists embedded in a list, and length.
> 一个 list 对象中的元素的数据类型可以是不一致的，list对象中可以包含list元素

## Creating
> To create a list we can use the list() function. Note how each of the four list items are of different classes (integer, character, logical, and numeric) and different length.
> 使用 list() 函数去创建list对象。元素可以是不同的类型、不同的长度
```r
> l <- list(1:3, "a", c(TRUE, FALSE, TRUE), c(2.5, 4.2), list(LETTERS[1:5]))
> str(l)
List of 5
 $ : int [1:3] 1 2 3
 $ : chr "a"
 $ : logi [1:3] TRUE FALSE TRUE
 $ : num [1:2] 2.5 4.2
 $ :List of 1
  ..$ : chr [1:5] "A" "B" "C" "D" ...
```

## Adding on to
> To add additional list components to a list we can leverage the list() and append() functions.
> 在list对象后追加元素，需要使用list()函数或append()函数

> If we add the new elements with list() it will create a list of two components, component 1 will be a nested list of the original list and component 2 will be the new elements added:
> 假如使用 list() 函数生成一个 list对象，参数第一位放置的是list对象，参数第二位放置的是被添加的元素，第二个部分当成一个整体存在
> append() 函数则将第二部分的数据拆分成单个元素进行追加
```r
> l1 <- list(l, c(1,2,3,4,5,6))

> str(l1)
List of 2
 $ :List of 5
  ..$ : int [1:3] 1 2 3
  ..$ : chr "a"
  ..$ : logi [1:3] TRUE FALSE TRUE
  ..$ : num [1:2] 2.5 4.2
  ..$ :List of 1
  .. ..$ : chr [1:5] "A" "B" "C" "D" ...
 $ : num [1:6] 1 2 3 4 5 6

 > l2 <- append(l, c(1,2,3,4,5,6))
 > str(l2)
 List of 11
  $ : int [1:3] 1 2 3
  $ : chr "a"
  $ : logi [1:3] TRUE FALSE TRUE
  $ : num [1:2] 2.5 4.2
  $ :List of 1
   ..$ : chr [1:5] "A" "B" "C" "D" ...
  $ : num 1
  $ : num 2
  $ : num 3
  $ : num 4
  $ : num 5
  $ : num 6
```

> Alternatively, we can also add a new list component by utilizing the ‘$’ sign and naming the new item
> 也可以使用 \$ 符号 去追加元素
